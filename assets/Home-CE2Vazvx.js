import{_ as B,u as w,c as p,a as D,r as C,b as l,o as n,d as t,t as c,e as d,f as _,g as $,h as f,w as y,i as x,j as N,k as P,v as V,F as I,l as L,m as S,p as k,n as T}from"./index-CvyPqeqL.js";const A={class:"card h-100"},j=["src","alt"],H={key:1,class:"card-img-top bg-gradient d-flex align-items-center justify-content-center"},U={class:"card-body d-flex flex-column"},q={class:"card-title"},E={class:"card-text flex-grow-1"},F={class:"post-meta"},K={class:"d-flex gap-2 mt-3"},M={__name:"PostCard",props:{post:{type:Object,required:!0},commentCount:{type:Number,default:0}},emits:["delete"],setup(o){const i=o,{currentUser:u}=w(),a=p(()=>i.post.content.length>150?i.post.content.substring(0,150)+"...":i.post.content),b=p(()=>{const r=D.findById(i.post.authorId);return(r==null?void 0:r.name)||"Unknown"}),v=p(()=>new Date(i.post.createdAt).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"})),g=p(()=>u.value&&u.value.id===i.post.authorId);return(r,e)=>{const s=C("router-link");return n(),l("div",A,[o.post.image?(n(),l("img",{key:0,src:o.post.image,class:"card-img-top",alt:o.post.title},null,8,j)):(n(),l("div",H,[...e[1]||(e[1]=[t("i",{class:"bi bi-image",style:{"font-size":"3rem",color:"white"}},null,-1)])])),t("div",U,[t("h5",q,c(o.post.title),1),t("p",E,c(a.value),1),t("div",F,[t("span",null,[e[2]||(e[2]=t("i",{class:"bi bi-person"},null,-1)),d(" "+c(b.value),1)]),t("span",null,[e[3]||(e[3]=t("i",{class:"bi bi-calendar"},null,-1)),d(" "+c(v.value),1)]),t("span",null,[e[4]||(e[4]=t("i",{class:"bi bi-chat"},null,-1)),d(" "+c(o.commentCount)+" bình luận ",1)])]),t("div",K,[_(s,{to:`/posts/${o.post.id}`,class:"btn btn-primary flex-grow-1"},{default:y(()=>[...e[5]||(e[5]=[t("i",{class:"bi bi-eye me-1"},null,-1),d(" Xem chi tiết ",-1)])]),_:1},8,["to"]),g.value?(n(),$(s,{key:0,to:`/posts/${o.post.id}/edit`,class:"btn btn-outline-primary"},{default:y(()=>[...e[6]||(e[6]=[t("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["to"])):f("",!0),g.value?(n(),l("button",{key:1,onClick:e[0]||(e[0]=h=>r.$emit("delete",o.post.id)),class:"btn btn-outline-danger"},[...e[7]||(e[7]=[t("i",{class:"bi bi-trash"},null,-1)])])):f("",!0)])])])}}},z=B(M,[["__scopeId","data-v-c4b24f38"]]),O={class:"container"},Q={class:"page-container fade-in"},X={class:"row mb-4"},G={class:"col-md-8 mx-auto"},J={class:"input-group"},R={key:0,class:"row g-4"},W={key:1,class:"empty-state"},Z={__name:"Home",setup(o){const{isAuthenticated:i}=w(),u=x([]),a=x(""),b=p(()=>{if(!a.value)return u.value;const e=a.value.toLowerCase();return u.value.filter(s=>s.title.toLowerCase().includes(e)||s.content.toLowerCase().includes(e))}),v=()=>{u.value=k.getAll()},g=e=>T.getByPostId(e).length,r=e=>{confirm("Bạn có chắc chắn muốn xóa bài viết này?")&&(k.delete(e),v())};return N(()=>{v()}),(e,s)=>{const h=C("router-link");return n(),l("div",O,[t("div",Q,[s[5]||(s[5]=t("div",{class:"text-center mb-5"},[t("h1",{class:"text-gradient mb-3"},[t("i",{class:"bi bi-shop-window me-2"}),d(" Trang Bán Hàng ")]),t("p",{class:"lead text-secondary"},"Khám phá các bài viết và sản phẩm mới nhất")],-1)),t("div",X,[t("div",G,[t("div",J,[s[1]||(s[1]=t("span",{class:"input-group-text"},[t("i",{class:"bi bi-search"})],-1)),P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=m=>a.value=m),placeholder:"Tìm kiếm bài viết..."},null,512),[[V,a.value]])])])]),b.value.length>0?(n(),l("div",R,[(n(!0),l(I,null,L(b.value,m=>(n(),l("div",{key:m.id,class:"col-md-6 col-lg-4"},[_(z,{post:m,"comment-count":g(m.id),onDelete:r},null,8,["post","comment-count"])]))),128))])):(n(),l("div",W,[s[3]||(s[3]=t("i",{class:"bi bi-inbox"},null,-1)),s[4]||(s[4]=t("h3",null,"Chưa có bài viết nào",-1)),t("p",null,c(a.value?"Không tìm thấy bài viết phù hợp":"Hãy là người đầu tiên đăng bài!"),1),S(i)&&!a.value?(n(),$(h,{key:0,to:"/posts/create",class:"btn btn-primary"},{default:y(()=>[...s[2]||(s[2]=[t("i",{class:"bi bi-plus-circle me-2"},null,-1),d(" Tạo bài viết đầu tiên ",-1)])]),_:1})):f("",!0)]))])])}}};export{Z as default};
